# 数据地图前端项目开发文档

> 版本：v1.0  
> 生成时间：2024-02-24  
> 用途：前后端接口对接、联调说明、mock→API 改造指南

---

## 1. 项目概述

### 1.1 项目信息

- **项目名称**：数据地图管理平台（Data Map Manager Platform）
- **核心业务**：数据资产可视化管理，提供多维度数据分布视图（安全视角、业务视角、属主视角、数据目录）
- **主要功能**：
  - 全局搜索（表名/字段名搜索）
  - 数据统计卡片展示（按安全级别、业务分类、数据属主、主题域统计）
  - 资产目录清单查看
  - 库表字段详情查看与筛选

### 1.2 技术栈

| 类别 | 技术 | 版本 |
|------|------|------|
| 框架 | React | 17.0.1 |
| UI库 | Ant Design | 3.26.19 |
| 图标库 | lucide-react | 0.487.0 |
| HTTP客户端 | axios | 0.21.0 |
| 路由 | react-router-dom | 5.2.0 |
| 构建工具 | Webpack | 4.41.0 |
| 包管理器 | npm | - |

### 1.3 目录结构

```
fronted/
├── src/
│   ├── api/                    # API 接口定义
│   │   └── suggestions.js      # 搜索建议接口
│   ├── config/                 # 配置文件
│   │   └── api.js              # API 基础路径配置
│   ├── utils/                  # 工具函数
│   │   └── request.js          # axios 封装
│   ├── dataDistribution/       # 数据分布模块（核心业务）
│   │   ├── DataDistributionView.jsx    # 主页面
│   │   ├── GlobalSearch.jsx            # 全局搜索组件
│   │   ├── SecurityView.jsx            # 安全视角
│   │   ├── BusinessView.jsx            # 业务视角
│   │   ├── OwnerView.jsx               # 属主视角
│   │   ├── CatalogView.jsx             # 数据目录
│   │   ├── AssetCategoryModal.jsx      # 资产分类弹窗
│   │   ├── TableDetailModal.jsx        # 表详情弹窗
│   │   ├── DataCard.jsx                # 统计卡片组件
│   │   └── iconConfig.js               # 图标颜色配置
│   ├── App.js                  # 应用入口
│   └── index.js                # React 挂载点
├── public/
├── config/                     # Webpack 配置
└── package.json
```

---

## 2. 功能模块与页面说明

### 2.1 数据分布主页面

**文件路径**：`src/dataDistribution/DataDistributionView.jsx`

**路由路径**：`/`（根路径，直接在 App.js 中渲染）

**页面功能**：

- 全局搜索（表名/字段名）
- 四个视角切换（Tab 切换）
- 统计卡片展示与点击交互
- 弹窗展示资产清单和详情

**数据依赖**：
- 全局搜索：`fieldDatabase`（mock 数据，第14行）
- 安全视角：`securityData`（mock 数据，第32行）
- 业务视角：`businessData`（mock 数据，第40行）
- 属主视角：`ownerData`（mock 数据，第49行）
- 数据目录：`catalogData`（mock 数据，第57行）

**交互流程**：
1. 用户输入搜索关键词 → 点击搜索 → 展示搜索结果表格
2. 用户切换视角 Tab → 展示对应统计卡片
3. 用户点击卡片 → 打开资产分类弹窗 → 展开查看资产项 → 点击资产项 → 打开表详情弹窗

---

### 2.2 全局搜索组件

**文件路径**：`src/dataDistribution/GlobalSearch.jsx`

**功能**：
- 搜索类型切换（搜表/搜字段）
- 输入框带防抖搜索建议（300ms）
- 搜索结果表格展示（最多显示所有匹配结果，超过5条时固定高度滚动）

**筛选条件**：
- `globalSearch`：搜索关键词（String）
- `searchType`：搜索类型（'table' | 'field'）

**数据依赖**：
- 搜索建议：调用 `suggestionsApi.getGlobalSearchSuggestions()` (第16-32行)
- 搜索结果：由父组件传入 `searchResults` 数组

**字段绑定**（搜索结果表格）：

| 表头 | 字段名 | 类型 | 说明 |
|------|--------|------|------|
| 字段名 | name | String | 字段英文名 |
| 表名 | table | String | 表英文名 |
| 系统 | system | String | 应用系统名称 |
| 安全级别 | securityLevel | String | 核心数据/重要数据/敏感数据/其它一般数据 |
| 业务视角 | businessCategory | String | 业务分类名称 |
| 属主视角 | owner | String | 数据属主 |

---

### 2.3 资产分类弹窗

**文件路径**：`src/dataDistribution/AssetCategoryModal.jsx`

**功能**：
- 展示资产分类层级（主题 → 一级分类 → 二级分类 → 资产项）
- 二级分类下拉筛选
- 资产项名称搜索（带防抖建议）
- 展开/收起资产项列表

**筛选条件**：
- `level2Filter`：二级分类（Select 下拉）
- `assetNameFilter`：资产项名称（AutoComplete，防抖300ms）

**数据依赖**：
- 资产名称建议：调用 `suggestionsApi.getAssetNameSuggestions()` (第20-33行)
- 资产分类数据：由父组件传入 `selectedCategory.categories` 数组

**字段绑定**（资产分类表格）：

| 表头 | 字段名 | 类型 | 说明 |
|------|--------|------|------|
| 主题 | theme | String | 主题名称 |
| 一级分类 | level1 | String | 一级分类名称 |
| 二级分类 | level2 | String | 二级分类名称 |
| 资产项名称 | items[].name | String | 资产项名称（展开后显示） |
| 操作 | - | - | 展开/收起按钮 |

---

### 2.4 表详情弹窗

**文件路径**：`src/dataDistribution/TableDetailModal.jsx`

**功能**：
- 展示资产下的库表字段详情
- 5个筛选条件（系统、表名、字段、中文名称、数据所有者）
- 每个筛选框带防抖搜索建议（300ms）

**筛选条件**：
- `filterSystem`：系统名称（AutoComplete）
- `filterTable`：表名（AutoComplete）
- `filterField`：字段名（AutoComplete）
- `filterCnName`：中文名称（AutoComplete）
- `filterOwner`：数据所有者（AutoComplete）

**数据依赖**：
- 筛选建议：调用 `suggestionsApi.getTableDetailSuggestions()` (第26-40行)
- 表详情数据：由父组件传入 `selectedAssetItem.tables` 数组

**字段绑定**（表详情表格）：

| 表头 | 字段名 | 类型 | 说明 |
|------|--------|------|------|
| 系统名称 | system | String | 应用系统名称（合并单元格） |
| 表名 | table | String | 表英文名（合并单元格） |
| 表中文名 | tableCnName | String | 表中文名（合并单元格） |
| 字段名 | fieldName | String | 字段英文名 |
| 字段中文名 | cnName | String | 字段中文名 |
| 数据分级 | classification | String | 安全级别（带颜色标签） |
| 数据属主 | dataOwner | String | 数据属主 |

---

### 2.5 统计卡片组件

**文件路径**：`src/dataDistribution/DataCard.jsx`

**功能**：通用统计卡片，展示字段数量、占比、表数量等

**字段绑定**：
- `item[titleKey]`：卡片标题（动态字段名）
- `item.systems`：关联系统列表（Array）
- `item.fieldCount`：字段数量（Number）
- `item.percentage`：占比（Number，可选）
- `item.tableCount`：表数量（Number，可选，仅属主视角显示）
- `item.color`：卡片主题色（String）

---

## 3. 数据模型（从 Mock 推断）

### 3.1 核心实体

#### 3.1.1 FieldSearchResult（字段搜索结果）

**来源**：`DataDistributionView.jsx` 第14行 `fieldDatabase`

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| name | String | ✅ | 字段英文名 | 'customer_id' |
| table | String | ✅ | 表英文名 | 'customer_info' |
| system | String | ✅ | 应用系统名称 | 'CRM系统' |
| securityLevel | String | ✅ | 安全级别 | '核心数据' |
| businessCategory | String | ✅ | 业务分类 | '客户数据' |
| owner | String | ✅ | 数据属主 | '客户管理部' |

---

#### 3.1.2 SecurityStatistics（安全视角统计）

**来源**：`DataDistributionView.jsx` 第32行 `securityData`

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| level | String | ✅ | 安全级别 | '核心数据' |
| fieldCount | Number | ✅ | 字段数量 | 125 |
| percentage | Number | ✅ | 占比 | 18 |
| position | String | ✅ | 布局位置 | 'top' / 'bottom' |
| systems | Array<String> | ✅ | 关联系统列表 | ['财务系统', '数据仓库'] |

---

#### 3.1.3 BusinessStatistics（业务视角统计）

**来源**：`DataDistributionView.jsx` 第40行 `businessData`

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| category | String | ✅ | 业务分类 | '客户数据' |
| fieldCount | Number | ✅ | 字段数量 | 186 |
| percentage | Number | ✅ | 占比 | 20 |
| systems | Array<String> | ✅ | 关联系统列表 | ['CRM系统'] |

---

#### 3.1.4 OwnerStatistics（属主视角统计）

**来源**：`DataDistributionView.jsx` 第49行 `ownerData`

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| owner | String | ✅ | 数据属主 | '团险事业部' |
| fieldCount | Number | ✅ | 字段数量 | 168 |
| tableCount | Number | ✅ | 表数量 | 28 |
| systems | Array<String> | ✅ | 关联系统列表 | ['团险核心系统'] |

---

#### 3.1.5 CatalogData（数据目录）

**来源**：`DataDistributionView.jsx` 第57行 `catalogData`

**结构层级**：Catalog → Category → Item → Table → Field（5层嵌套）

**Catalog（目录）**：
| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | String | ✅ | 目录ID | 'basic' |
| name | String | ✅ | 目录名称 | '基础数据资产' |
| description | String | ✅ | 目录描述 | '企业运营的基础数据资产' |
| categories | Array<Category> | ✅ | 分类列表 | [...] |

**Category（分类）**：
| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | String | ✅ | 分类ID | 'basic-customer' |
| name | String | ✅ | 分类名称 | '客户主题' |
| theme | String | ✅ | 主题 | '客户数据' |
| level1 | String | ✅ | 一级分类 | '基础数据' |
| level2 | String | ✅ | 二级分类 | '客户信息' |
| items | Array<Item> | ✅ | 资产项列表 | [...] |

**Item（资产项）**：
| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| name | String | ✅ | 资产项名称 | '客户基本信息' |
| description | String | ✅ | 资产项描述 | '客户的基本属性数据' |
| tableCount | Number | ✅ | 表数量 | 3 |
| fieldCount | Number | ✅ | 字段数量 | 45 |
| tables | Array<Table> | ✅ | 表列表 | [...] |

**Table（表）**：
| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| system | String | ✅ | 应用系统名称 | 'CRM系统' |
| table | String | ✅ | 表英文名 | 'customer_info' |
| tableCnName | String | ✅ | 表中文名 | '客户信息表' |
| fields | Array<Field> | ✅ | 字段列表 | [...] |

**Field（字段）**：
| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| name | String | ✅ | 字段英文名 | 'customer_id' |
| cnName | String | ✅ | 字段中文名 | '客户ID' |
| classification | String | ✅ | 数据分级 | '核心数据' |
| dataOwner | String | ✅ | 数据属主 | '客户管理部' |

---

### 3.2 枚举/字典项

#### 3.2.1 安全级别（SecurityLevel）

**来源**：推断自 mock 数据和 `iconConfig.js` 第52行

| 值 | 说明 | 颜色 |
|----|------|------|
| 核心数据 | 核心数据 | #f5222d（红色） |
| 重要数据 | 重要数据 | #fa8c16（橙色） |
| 敏感数据 | 敏感数据 | #1890ff（蓝色） |
| 其它一般数据 | 其它一般数据 | #52c41a（绿色） |

**建议**：后端提供字典接口 `/ddm/dataMap/safetyClassification`

#### 3.2.2 业务分类（BusinessCategory）

**来源**：推断自 mock 数据和 `iconConfig.js` 第60行

| 值 | 说明 | 颜色 |
|----|------|------|
| 客户数据 | 客户数据 | #722ed1（紫色） |
| 保单数据 | 保单数据 | #1890ff（蓝色） |
| 理赔数据 | 理赔数据 | #52c41a（绿色） |
| 渠道数据 | 渠道数据 | #faad14（黄色） |
| 财务数据 | 财务数据 | #f5222d（红色） |

**建议**：后端提供字典接口 `/ddm/dataMap/businessCategory`

---

#### 3.2.3 搜索类型（SearchType）

**来源**：`GlobalSearch.jsx` 第60行

| 值 | 说明 |
|----|------|
| table | 搜表 |
| field | 搜字段 |

---

## 4. 接口文档（从前端推断）

### 4.1 通用规范

**基础路径**：`/ddm/dataMap`（来源：《数据地图接口文档.md》）

**请求方式**：统一 POST

**Content-Type**：`application/json`

**通用响应格式**：
```json
{
  "code": "200",
  "message": "success",
  "data": {}
}
```

**分页规范**（建议）：
```json
{
  "code": "200",
  "message": "success",
  "data": {
    "records": [],
    "total": 100,
    "pageNum": 1,
    "pageSize": 20
  }
}
```

---

### 4.2 全局搜索模块

#### 4.2.1 全局搜索

**接口名称**：全局搜索

**URL**：`/ddm/dataMap/globalSearch`

**Method**：POST

**使用位置**：`DataDistributionView.jsx` 第223行 `handleGlobalSearch()`

**Request**：

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| tableName | String | 是 | 表名关键字 | 'customer' |
| columnName | String | 是 | 字段名关键字 | 'customer' |

**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": [
    {
      "assetId": 1001,
      "appName": "CRM系统",
      "tableName": "customer_info",
      "tableDesc": "客户信息表",
      "columnName": "customer_id",
      "columnDesc": "客户ID",
      "safetyClassificationName": "核心数据",
      "domainName": "客户数据",
      "dataOwner": "客户管理部"
    }
  ]
}
```

**字段映射**（后端 → 前端）：

| 后端字段 | 前端字段 | 说明 |
|---------|---------|------|
| columnName | name | 字段名 |
| tableName | table | 表名 |
| appName | system | 系统名 |
| safetyClassificationName | securityLevel | 安全级别 |
| domainName | businessCategory | 业务分类 |
| dataOwner | owner | 数据属主 |

**备注**：前端需要创建字段映射函数（见第6章改造方案）

---

#### 4.2.2 表名搜索建议

**接口名称**：表名下拉列表

**URL**：`/ddm/dataMap/tableNameDropdown`

**Method**：POST

**使用位置**：`GlobalSearch.jsx` 第16行（通过 `suggestions.js` 调用）

**Request**：

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| tableNameKeyword | String | 是 | 表名关键字 | 'cust' |

**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": [
    { "tableName": "customer_info" },
    { "tableName": "customer_contact" }
  ]
}
```

**前端期望**：字符串数组 `['customer_info', 'customer_contact']`

**适配方案**：前端提取 `tableName` 字段

---

#### 4.2.3 字段名搜索建议

**接口名称**：字段名下拉列表

**URL**：`/ddm/dataMap/columnNameDropdown`

**Method**：POST

**使用位置**：`GlobalSearch.jsx` 第16行（通过 `suggestions.js` 调用）

**Request**：

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| columnNameKeyword | String | 是 | 字段名关键字 | 'cust' |

**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": [
    { "columnName": "customer_id" },
    { "columnName": "customer_name" }
  ]
}
```

**前端期望**：字符串数组 `['customer_id', 'customer_name']`

**适配方案**：前端提取 `columnName` 字段

---

### 4.3 安全视角模块

#### 4.3.1 安全视角统计

**接口名称**：安全视角统计

**URL**：`/ddm/dataMap/safetyView/statistics`

**Method**：POST

**使用位置**：`DataDistributionView.jsx` 第32行（当前使用 mock）

**Request**：无参数

**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": [
    {
      "code": "core",
      "name": "核心数据",
      "appName": "财务系统",
      "cnt": 50
    },
    {
      "code": "core",
      "name": "核心数据",
      "appName": "数据仓库",
      "cnt": 75
    }
  ]
}
```

**前端期望结构**：

```json
[
  {
    "level": "核心数据",
    "fieldCount": 125,
    "percentage": 18,
    "position": "top",
    "systems": ["财务系统", "数据仓库"]
  }
]
```

**字段映射**：

| 后端字段 | 前端字段 | 说明 |
|---------|---------|------|
| name | level | 安全级别名称 |
| cnt | fieldCount | 字段数量（需聚合） |
| appName | systems | 系统列表（需聚合成数组） |
| - | percentage | 占比（前端计算） |
| - | position | 布局位置（前端固定：前2个top，后2个bottom） |

**适配方案**：前端需要聚合数据（按 code 分组，累加 cnt，收集 appName）

---

#### 4.3.2 安全视角资产清单

**接口名称**：安全视角资产目录清单

**URL**：`/ddm/dataMap/safetyView/assetList`

**Method**：POST

**使用位置**：`AssetCategoryModal.jsx`（点击卡片后调用）

**Request**：

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| code | String | 是 | 安全分类编码 | 'core' |
| assetName | String | 否 | 资产名称（模糊查询） | '客户' |
| pageNum | Number | 否 | 页码 | 1 |
| pageSize | Number | 否 | 每页条数 | 20 |

**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": {
    "records": [
      {
        "domainId": 1,
        "twoCategoryId": 10,
        "threeCategoryId": 100,
        "fourCategoryId": 1000,
        "domainName": "客户主题",
        "twoCategoryName": "客户信息",
        "threeCategoryName": "基本信息",
        "fourCategoryName": "详细信息",
        "assetName": "客户基本信息",
        "assetId": 10001
      }
    ],
    "total": 50,
    "pageNum": 1,
    "pageSize": 20
  }
}
```

**前端期望结构**（嵌套树形）：

```json
{
  "level": "核心数据",
  "categories": [
    {
      "id": "basic-customer",
      "theme": "客户数据",
      "level1": "基础数据",
      "level2": "客户信息",
      "items": [
        {
          "name": "客户基本信息",
          "assetId": 10001
        }
      ]
    }
  ]
}
```

**适配方案**：前端需要将扁平数据重组为树形结构（按 domainId、twoCategoryId 分组）

---

#### 4.3.3 安全视角资产详情

**接口名称**：安全视角资产详情

**URL**：`/ddm/dataMap/safetyView/assetDetail`

**Method**：POST

**使用位置**：`TableDetailModal.jsx`（点击资产项后调用）

**Request**：

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| assetId | Long | 是 | 资产ID | 10001 |
| appNameKeyword | String | 否 | 应用系统名称关键字 | 'CRM' |
| tableNameKeyword | String | 否 | 表名关键字 | 'customer' |
| tableDescKeyword | String | 否 | 表描述关键字 | '客户' |
| columnNameKeyword | String | 否 | 字段名关键字 | 'id' |
| columnDescKeyword | String | 否 | 字段描述关键字 | 'ID' |
| dataOwnerKeyword | String | 否 | 数据属主关键字 | '客户' |
| pageNum | Number | 否 | 页码 | 1 |
| pageSize | Number | 否 | 每页条数 | 50 |


**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": {
    "records": [
      {
        "assetId": 10001,
        "appName": "CRM系统",
        "tableName": "customer_info",
        "tableDesc": "客户信息表",
        "columnName": "customer_id",
        "columnDesc": "客户ID",
        "safetyClassificationName": "核心数据",
        "dataOwner": "客户管理部"
      }
    ],
    "total": 100,
    "pageNum": 1,
    "pageSize": 50
  }
}
```

**前端期望结构**（按表分组）：

```json
{
  "tables": [
    {
      "system": "CRM系统",
      "table": "customer_info",
      "tableCnName": "客户信息表",
      "fields": [
        {
          "name": "customer_id",
          "cnName": "客户ID",
          "classification": "核心数据",
          "dataOwner": "客户管理部"
        }
      ]
    }
  ]
}
```

**适配方案**：前端需要按 `tableName` 分组，将字段聚合到表下

---

### 4.4 业务视角模块

#### 4.4.1 业务视角统计

**URL**：`/ddm/dataMap/businessView/statistics`

**使用位置**：`DataDistributionView.jsx` 第40行（当前使用 mock）

**接口定义**：同安全视角统计，字段映射：
- `domainName` → `category`
- `cnt` → `fieldCount`


#### 4.4.2 业务视角资产清单

**URL**：`/ddm/dataMap/businessView/assetList`

**Request**：

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| domainId | Long | 是 | 主题域ID |
| assetName | String | 否 | 资产名称 |
| pageNum | Number | 否 | 页码 |
| pageSize | Number | 否 | 每页条数 |

**Response**：同安全视角资产清单

---

#### 4.4.3 业务视角资产详情

**URL**：`/ddm/dataMap/businessView/assetDetail`

**接口定义**：同安全视角资产详情

---

### 4.5 属主视角模块

#### 4.5.1 属主视角统计

**URL**：`/ddm/dataMap/ownerView/statistics`

**使用位置**：`DataDistributionView.jsx` 第49行（当前使用 mock）

**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": [
    {
      "dataOwner": "团险事业部",
      "appName": "团险核心系统",
      "cnt": 168
    }
  ]
}
```

**前端期望**：需要增加 `tableCount` 字段

**字段映射**：
- `dataOwner` → `owner`
- `cnt` → `fieldCount`
- 缺失 `tableCount`（需后端补充或前端单独查询）

---

#### 4.5.2 属主视角资产清单

**URL**：`/ddm/dataMap/ownerView/assetList`

**Request**：

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| dataOwner | String | 是 | 数据属主 |
| assetName | String | 否 | 资产名称 |
| pageNum | Number | 否 | 页码 |
| pageSize | Number | 否 | 每页条数 |


**Response**：同安全视角资产清单

---

#### 4.5.3 属主视角资产详情

**URL**：`/ddm/dataMap/ownerView/assetDetail`

**接口定义**：同安全视角资产详情

---

### 4.6 数据目录模块

#### 4.6.1 数据目录统计

**URL**：`/ddm/dataMap/dataCatalog/statistics`

**使用位置**：`CatalogView.jsx`（当前使用 mock）

**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": [
    {
      "domainId": 1,
      "domainName": "客户主题",
      "tableCnt": 5,
      "columnCnt": 73
    }
  ]
}
```

**前端期望**：需要嵌套的树形结构（Catalog → Category → Item）

**适配方案**：前端需要重组数据或后端提供树形接口

---

#### 4.6.2 数据目录资产清单

**URL**：`/ddm/dataMap/dataCatalog/assetList`

**接口定义**：同业务视角资产清单

---

#### 4.6.3 数据目录资产详情

**URL**：`/ddm/dataMap/dataCatalog/assetDetail`

**接口定义**：同安全视角资产详情

---

### 4.7 搜索建议接口（前端新增，需后端补充）

#### 4.7.1 资产名称搜索建议

**接口名称**：资产名称搜索建议

**URL**：`/ddm/dataMap/suggestions/assetName`（建议新增）

**Method**：POST

**使用位置**：`AssetCategoryModal.jsx` 第20行

**Request**：

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| keyword | String | 是 | 搜索关键字 | '客户' |
| level | String | 否 | 分类级别 | '核心数据' |


**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": {
    "suggestions": [
      "客户基本信息",
      "客户联系方式",
      "客户地址信息"
    ]
  }
}
```

**临时方案**：复用 `/assetList` 接口，前端只提取 `assetName` 字段

---

#### 4.7.2 表详情筛选建议

**接口名称**：表详情筛选建议

**URL**：`/ddm/dataMap/suggestions/tableDetail`（建议新增）

**Method**：POST

**使用位置**：`TableDetailModal.jsx` 第26行

**Request**：

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| fieldType | String | 是 | 字段类型 | 'system' / 'table' / 'field' / 'cnName' / 'owner' |
| keyword | String | 是 | 搜索关键字 | 'CRM' |
| assetItem | String | 否 | 资产项名称 | '客户基本信息' |

**Response**：

```json
{
  "code": "200",
  "message": "success",
  "data": {
    "suggestions": [
      "CRM系统",
      "CRM核心系统"
    ]
  }
}
```

**临时方案**：前端本地过滤（从已加载的详情数据中提取）

---

### 4.8 错误码建议

| 错误码 | 说明 | 前端处理 |
|--------|------|---------|
| 200 | 成功 | 正常处理 |
| 400 | 请求参数错误 | 提示用户检查输入 |
| 401 | 未登录 | 跳转登录页 |
| 403 | 无权限 | 提示无权限 |
| 404 | 资源不存在 | 提示数据不存在 |
| 500 | 服务器错误 | 提示系统错误，请稍后重试 |
| 1001 | 数据不存在 | 提示数据不存在 |
| 1002 | 数据已删除 | 提示数据已删除 |

---

## 5. 联调与鉴权约定

### 5.1 环境配置

**baseURL 配置**：`src/config/api.js`

```javascript
const api = process.env.REACT_APP_API_BASE_URL || '';
```


**环境变量**（需在项目根目录创建）：

```bash
# .env.development
REACT_APP_API_BASE_URL=http://localhost:8080

# .env.test
REACT_APP_API_BASE_URL=https://test-api.example.com

# .env.production
REACT_APP_API_BASE_URL=https://api.example.com
```

---

### 5.2 鉴权方式

**Token 传递**：`src/utils/request.js` 第16-21行（已预留）

```javascript
// 请求拦截器中添加 token
const token = localStorage.getItem('token');
if (token) {
  config.headers['Authorization'] = `Bearer ${token}`;
}
```

**未登录处理**：响应拦截器中判断 401 状态码，跳转登录页（需补充）

---

### 5.3 超时与重试

**超时时间**：10秒（`request.js` 第6行）

**重试机制**：当前未实现，建议后续添加

**全局错误处理**：`request.js` 第26-35行

```javascript
// 响应拦截器
if (res.code !== 200 && res.code !== undefined) {
  console.error('接口错误:', res.message || '请求失败');
  return Promise.reject(new Error(res.message || '请求失败'));
}
```

**建议增强**：
- 添加 `message.error()` 提示用户
- 401 跳转登录
- 403 提示无权限
- 500 提示系统错误

---

## 6. mockData → API 改造计划

### 6.1 改造清单

| 文件路径 | 当前 mock 来源 | 应替换为 | 参数映射 | 字段适配 | 风险点 |
|---------|---------------|---------|---------|---------|--------|
| `DataDistributionView.jsx` 第14行 | `fieldDatabase` 数组 | `globalSearch()` | keyword → tableName/columnName | 需字段映射 | 无 |
| `DataDistributionView.jsx` 第32行 | `securityData` 数组 | `safetyStatistics()` | 无 | 需聚合+计算百分比 | 数据结构差异大 |
| `DataDistributionView.jsx` 第40行 | `businessData` 数组 | `businessStatistics()` | 无 | 需聚合+计算百分比 | 数据结构差异大 |
| `DataDistributionView.jsx` 第49行 | `ownerData` 数组 | `ownerStatistics()` | 无 | 需聚合+补充tableCount | 缺少tableCount字段 |
| `DataDistributionView.jsx` 第57行 | `catalogData` 数组 | `catalogStatistics()` + `assetList()` | 无 | 需重组树形结构 | 结构差异极大 |
| `DataDistributionView.jsx` 第270行 | `mockCategories` 临时数据 | `assetList()` | code/domainId/dataOwner | 需重组树形结构 | 点击卡片时动态加载 |
| `GlobalSearch.jsx` 第16行 | 无（调用API） | `tableNameDropdown()` / `columnNameDropdown()` | keyword → tableNameKeyword/columnNameKeyword | 提取字段名 | 已实现 |
| `AssetCategoryModal.jsx` 第20行 | 无（调用API） | `assetNameSuggestions()` | keyword + level | 提取assetName | 接口未定义 |
| `TableDetailModal.jsx` 第26行 | 无（调用API） | `tableDetailSuggestions()` | fieldType + keyword + assetItem | 提取建议值 | 接口未定义 |


---

### 6.2 统一改造方案

#### 6.2.1 新建 API 模块（按业务域分文件）

**目录结构**：

```
src/api/
├── dataMap.js          # 数据地图主接口
├── suggestions.js      # 搜索建议接口（已存在）
└── index.js            # 统一导出
```

**创建 `src/api/dataMap.js`**：

```javascript
import request from '../utils/request';
import api from '../config/api';

export default {
  // 全局搜索
  globalSearch: (params) => request({
    url: api + '/ddm/dataMap/globalSearch',
    method: 'post',
    data: {
      tableName: params.keyword,
      columnName: params.keyword
    }
  }),

  // 安全视角统计
  safetyStatistics: () => request({
    url: api + '/ddm/dataMap/safetyView/statistics',
    method: 'post'
  }),

  // 安全视角资产清单
  safetyAssetList: (params) => request({
    url: api + '/ddm/dataMap/safetyView/assetList',
    method: 'post',
    data: params
  }),

  // 安全视角资产详情
  safetyAssetDetail: (params) => request({
    url: api + '/ddm/dataMap/safetyView/assetDetail',
    method: 'post',
    data: params
  }),

  // 业务视角统计
  businessStatistics: () => request({
    url: api + '/ddm/dataMap/businessView/statistics',
    method: 'post'
  }),

  // 业务视角资产清单
  businessAssetList: (params) => request({
    url: api + '/ddm/dataMap/businessView/assetList',
    method: 'post',
    data: params
  }),

  // 业务视角资产详情
  businessAssetDetail: (params) => request({
    url: api + '/ddm/dataMap/businessView/assetDetail',
    method: 'post',
    data: params
  }),

  // 属主视角统计
  ownerStatistics: () => request({
    url: api + '/ddm/dataMap/ownerView/statistics',
    method: 'post'
  }),

  // 属主视角资产清单
  ownerAssetList: (params) => request({
    url: api + '/ddm/dataMap/ownerView/assetList',
    method: 'post',
    data: params
  }),

  // 属主视角资产详情
  ownerAssetDetail: (params) => request({
    url: api + '/ddm/dataMap/ownerView/assetDetail',
    method: 'post',
    data: params
  }),

  // 数据目录统计
  catalogStatistics: () => request({
    url: api + '/ddm/dataMap/dataCatalog/statistics',
    method: 'post'
  }),

  // 数据目录资产清单
  catalogAssetList: (params) => request({
    url: api + '/ddm/dataMap/dataCatalog/assetList',
    method: 'post',
    data: params
  }),

  // 数据目录资产详情
  catalogAssetDetail: (params) => request({
    url: api + '/ddm/dataMap/dataCatalog/assetDetail',
    method: 'post',
    data: params
  })
};
```


---

#### 6.2.2 创建字段映射层

**创建 `src/utils/fieldMapper.js`**：

```javascript
/**
 * 字段映射工具
 * 用途：将后端返回字段映射为前端期望格式
 */

// 全局搜索结果映射
export const mapGlobalSearchResult = (apiData) => ({
  name: apiData.columnName,
  table: apiData.tableName,
  system: apiData.appName,
  securityLevel: apiData.safetyClassificationName,
  businessCategory: apiData.domainName,
  owner: apiData.dataOwner
});

// 统计数据聚合与映射（通用）
export const mapStatistics = (apiData, groupByField, nameField) => {
  // 按指定字段分组
  const grouped = {};
  
  apiData.forEach(item => {
    const key = item[groupByField];
    if (!grouped[key]) {
      grouped[key] = {
        [nameField]: item[nameField] || item.name || item.domainName || item.dataOwner,
        fieldCount: 0,
        systems: []
      };
    }
    grouped[key].fieldCount += item.cnt;
    if (item.appName && !grouped[key].systems.includes(item.appName)) {
      grouped[key].systems.push(item.appName);
    }
  });
  
  // 计算百分比
  const total = Object.values(grouped).reduce((sum, item) => sum + item.fieldCount, 0);
  return Object.values(grouped).map(item => ({
    ...item,
    percentage: total > 0 ? Math.round((item.fieldCount / total) * 100) : 0
  }));
};

// 安全视角统计映射
export const mapSecurityStatistics = (apiData) => {
  const mapped = mapStatistics(apiData, 'code', 'name');
  // 添加 position 字段（前2个top，后2个bottom）
  return mapped.map((item, index) => ({
    ...item,
    level: item.name,
    position: index < 2 ? 'top' : 'bottom'
  }));
};

// 业务视角统计映射
export const mapBusinessStatistics = (apiData) => {
  const mapped = mapStatistics(apiData, 'domainId', 'domainName');
  return mapped.map(item => ({
    ...item,
    category: item.domainName
  }));
};

// 属主视角统计映射
export const mapOwnerStatistics = (apiData) => {
  const mapped = mapStatistics(apiData, 'dataOwner', 'dataOwner');
  return mapped.map(item => ({
    ...item,
    owner: item.dataOwner,
    tableCount: item.tableCount || 0  // 需后端补充
  }));
};

// 资产清单映射为树形结构
export const mapAssetListToTree = (apiData) => {
  const tree = {};
  
  apiData.forEach(item => {
    const categoryKey = `${item.domainId}-${item.twoCategoryId}`;
    
    if (!tree[categoryKey]) {
      tree[categoryKey] = {
        id: categoryKey,
        theme: item.domainName,
        level1: item.domainName,
        level2: item.twoCategoryName,
        items: []
      };
    }
    
    tree[categoryKey].items.push({
      name: item.assetName,
      assetId: item.assetId
    });
  });
  
  return Object.values(tree);
};

// 资产详情映射（按表分组）
export const mapAssetDetailToTables = (apiData) => {
  const tables = {};
  
  apiData.forEach(item => {
    const tableKey = item.tableName;
    
    if (!tables[tableKey]) {
      tables[tableKey] = {
        system: item.appName,
        table: item.tableName,
        tableCnName: item.tableDesc,
        fields: []
      };
    }
    
    tables[tableKey].fields.push({
      name: item.columnName,
      cnName: item.columnDesc,
      classification: item.safetyClassificationName,
      dataOwner: item.dataOwner
    });
  });
  
  return Object.values(tables);
};
```


---

#### 6.2.3 更新 request.js 统一返回处理

**修改 `src/utils/request.js`**：

```javascript
// 响应拦截器（增强版）
service.interceptors.response.use(
  response => {
    const res = response.data;
    
    // 注意：后端返回的 code 是字符串 "200"
    if (res.code !== '200' && res.code !== 200) {
      // 根据错误码处理
      if (res.code === '401' || res.code === 401) {
        // 跳转登录页
        window.location.href = '/login';
      } else if (res.code === '403' || res.code === 403) {
        console.error('无权限访问');
      } else {
        console.error('接口错误:', res.message || '请求失败');
      }
      return Promise.reject(new Error(res.message || '请求失败'));
    }
    
    // 直接返回 data 字段
    return res.data;
  },
  error => {
    console.error('响应错误:', error);
    // 网络错误或超时
    if (error.message.includes('timeout')) {
      console.error('请求超时，请稍后重试');
    } else if (error.message.includes('Network Error')) {
      console.error('网络错误，请检查网络连接');
    }
    return Promise.reject(error);
  }
);
```

---

#### 6.2.4 更新 suggestions.js

**修改 `src/api/suggestions.js`**：

```javascript
import request from '../utils/request';
import api from '../config/api';

export default {
  // 全局搜索建议（复用下拉接口）
  getGlobalSearchSuggestions: async (params) => {
    const endpoint = params.type === 'table' 
      ? '/ddm/dataMap/tableNameDropdown'
      : '/ddm/dataMap/columnNameDropdown';
    
    const response = await request({
      url: api + endpoint,
      method: 'post',
      data: {
        tableNameKeyword: params.type === 'table' ? params.keyword : undefined,
        columnNameKeyword: params.type === 'field' ? params.keyword : undefined
      }
    });
    
    // 提取字段名
    return response.map(item => 
      params.type === 'table' ? item.tableName : item.columnName
    );
  },

  // 资产名称搜索建议（临时方案：复用资产清单接口）
  getAssetNameSuggestions: async (params) => {
    // TODO: 等待后端提供专用建议接口
    // 临时方案：调用资产清单接口，只取前10条的 assetName
    try {
      const response = await request({
        url: api + '/ddm/dataMap/safetyView/assetList',
        method: 'post',
        data: {
          assetName: params.keyword,
          pageNum: 1,
          pageSize: 10
        }
      });
      
      return response.records.map(item => item.assetName);
    } catch (error) {
      console.error('获取资产名称建议失败:', error);
      return [];
    }
  },

  // 表详情筛选建议（临时方案：前端本地过滤）
  getTableDetailSuggestions: async (params) => {
    // TODO: 等待后端提供专用建议接口
    // 临时方案：返回空数组，由前端从已加载数据中过滤
    console.warn('表详情筛选建议接口未实现，建议后端补充');
    return [];
  }
};
```


---

#### 6.2.5 更新主页面调用

**修改 `src/dataDistribution/DataDistributionView.jsx`**：

```javascript
import React, { useState, useEffect } from 'react';
import dataMapApi from '../api/dataMap';
import { 
  mapGlobalSearchResult, 
  mapSecurityStatistics,
  mapBusinessStatistics,
  mapOwnerStatistics 
} from '../utils/fieldMapper';

const DataDistributionView = () => {
  const [securityData, setSecurityData] = useState([]);
  const [businessData, setBusinessData] = useState([]);
  const [ownerData, setOwnerData] = useState([]);
  const [loading, setLoading] = useState(false);

  // 加载统计数据
  useEffect(() => {
    loadStatistics();
  }, []);

  const loadStatistics = async () => {
    setLoading(true);
    try {
      const [security, business, owner] = await Promise.all([
        dataMapApi.safetyStatistics(),
        dataMapApi.businessStatistics(),
        dataMapApi.ownerStatistics()
      ]);
      
      setSecurityData(mapSecurityStatistics(security));
      setBusinessData(mapBusinessStatistics(business));
      setOwnerData(mapOwnerStatistics(owner));
    } catch (error) {
      console.error('加载统计数据失败:', error);
    } finally {
      setLoading(false);
    }
  };

  // 全局搜索
  const handleGlobalSearch = async () => {
    if (!globalSearch.trim()) {
      setSearchResults([]);
      setShowSearchResults(false);
      return;
    }

    setLoading(true);
    try {
      const results = await dataMapApi.globalSearch({ keyword: globalSearch });
      setSearchResults(results.map(mapGlobalSearchResult));
      setShowSearchResults(true);
    } catch (error) {
      console.error('搜索失败:', error);
      setSearchResults([]);
    } finally {
      setLoading(false);
    }
  };

  // 点击卡片加载资产清单
  const handleCardClick = async (type, value) => {
    setLoading(true);
    try {
      let apiMethod, params;
      
      if (type === 'security') {
        apiMethod = dataMapApi.safetyAssetList;
        params = { code: value };
      } else if (type === 'business') {
        apiMethod = dataMapApi.businessAssetList;
        params = { domainId: value };  // 需要传 ID，不是名称
      } else if (type === 'owner') {
        apiMethod = dataMapApi.ownerAssetList;
        params = { dataOwner: value };
      }
      
      const assetList = await apiMethod(params);
      const categories = mapAssetListToTree(assetList.records);
      
      setSelectedCategory({ level: value, categories });
    } catch (error) {
      console.error('加载资产清单失败:', error);
    } finally {
      setLoading(false);
    }
  };

  // ... 其他代码保持不变
};
```

---

### 6.3 改造优先级建议

**P0（第一期必须完成）**：
1. ✅ 创建 `src/api/dataMap.js`
2. ✅ 创建 `src/utils/fieldMapper.js`
3. ✅ 更新 `request.js` 响应处理
4. ✅ 更新 `suggestions.js`（复用现有接口）
5. ✅ 更新 `DataDistributionView.jsx` 统计数据加载
6. ✅ 更新 `DataDistributionView.jsx` 全局搜索

**P1（第二期优化）**：
1. 实现资产清单加载（点击卡片）
2. 实现资产详情加载（点击资产项）
3. 添加加载状态（Loading）
4. 添加错误提示（message.error）
5. 添加数据缓存（sessionStorage）

**P2（后续优化）**：
1. 后端补充搜索建议接口
2. 实现分页加载
3. 实现虚拟滚动（大数据量）
4. 添加请求取消机制

---

### 6.4 风险点与注意事项

| 风险点 | 影响 | 解决方案 |
|--------|------|---------|
| 后端返回 code 是字符串 "200" | 判断逻辑错误 | 使用 `!== '200' && !== 200` 兼容 |
| 统计数据需要聚合 | 前端计算复杂 | 建议后端提供聚合接口 |
| 资产清单需要重组树形结构 | 前端处理复杂 | 建议后端提供树形接口 |
| 属主视角缺少 tableCount | 数据不完整 | 后端补充字段或前端单独查询 |
| 搜索建议接口未定义 | 功能不完整 | 临时复用现有接口 |
| 分页结构未定义 | 大数据量卡顿 | 后端补充分页参数 |
| 业务分类需要传 ID 而非名称 | 参数错误 | 前端需要维护 ID 映射表 |

---

## 7. 附录：接口清单 JSON

```json
[
  {
    "name": "全局搜索",
    "url": "/ddm/dataMap/globalSearch",
    "method": "POST",
    "requestSchema": {
      "tableName": "String",
      "columnName": "String"
    },
    "responseSchema": {
      "assetId": "Long",
      "appName": "String",
      "tableName": "String",
      "tableDesc": "String",
      "columnName": "String",
      "columnDesc": "String",
      "safetyClassificationName": "String",
      "domainName": "String",
      "dataOwner": "String"
    },
    "usedInFiles": [
      "src/dataDistribution/DataDistributionView.jsx:223"
    ]
  },
  {
    "name": "表名下拉列表",
    "url": "/ddm/dataMap/tableNameDropdown",
    "method": "POST",
    "requestSchema": {
      "tableNameKeyword": "String"
    },
    "responseSchema": {
      "tableName": "String"
    },
    "usedInFiles": [
      "src/api/suggestions.js:10"
    ]
  },
  {
    "name": "字段名下拉列表",
    "url": "/ddm/dataMap/columnNameDropdown",
    "method": "POST",
    "requestSchema": {
      "columnNameKeyword": "String"
    },
    "responseSchema": {
      "columnName": "String"
    },
    "usedInFiles": [
      "src/api/suggestions.js:10"
    ]
  },
  {
    "name": "安全视角统计",
    "url": "/ddm/dataMap/safetyView/statistics",
    "method": "POST",
    "requestSchema": {},
    "responseSchema": {
      "code": "String",
      "name": "String",
      "appName": "String",
      "cnt": "Long"
    },
    "usedInFiles": [
      "src/dataDistribution/DataDistributionView.jsx:32"
    ]
  },
  {
    "name": "安全视角资产清单",
    "url": "/ddm/dataMap/safetyView/assetList",
    "method": "POST",
    "requestSchema": {
      "code": "String",
      "assetName": "String?",
      "pageNum": "Number?",
      "pageSize": "Number?"
    },
    "responseSchema": {
      "records": "Array",
      "total": "Number",
      "pageNum": "Number",
      "pageSize": "Number"
    },
    "usedInFiles": [
      "src/dataDistribution/AssetCategoryModal.jsx"
    ]
  },
  {
    "name": "安全视角资产详情",
    "url": "/ddm/dataMap/safetyView/assetDetail",
    "method": "POST",
    "requestSchema": {
      "assetId": "Long",
      "appNameKeyword": "String?",
      "tableNameKeyword": "String?",
      "tableDescKeyword": "String?",
      "columnNameKeyword": "String?",
      "columnDescKeyword": "String?",
      "dataOwnerKeyword": "String?",
      "pageNum": "Number?",
      "pageSize": "Number?"
    },
    "responseSchema": {
      "records": "Array",
      "total": "Number"
    },
    "usedInFiles": [
      "src/dataDistribution/TableDetailModal.jsx"
    ]
  },
  {
    "name": "业务视角统计",
    "url": "/ddm/dataMap/businessView/statistics",
    "method": "POST",
    "requestSchema": {},
    "responseSchema": {
      "domainId": "Long",
      "domainName": "String",
      "appName": "String",
      "cnt": "Long"
    },
    "usedInFiles": [
      "src/dataDistribution/DataDistributionView.jsx:40"
    ]
  },
  {
    "name": "业务视角资产清单",
    "url": "/ddm/dataMap/businessView/assetList",
    "method": "POST",
    "requestSchema": {
      "domainId": "Long",
      "assetName": "String?",
      "pageNum": "Number?",
      "pageSize": "Number?"
    },
    "responseSchema": "同安全视角资产清单",
    "usedInFiles": [
      "src/dataDistribution/AssetCategoryModal.jsx"
    ]
  },
  {
    "name": "业务视角资产详情",
    "url": "/ddm/dataMap/businessView/assetDetail",
    "method": "POST",
    "requestSchema": "同安全视角资产详情",
    "responseSchema": "同安全视角资产详情",
    "usedInFiles": [
      "src/dataDistribution/TableDetailModal.jsx"
    ]
  },
  {
    "name": "属主视角统计",
    "url": "/ddm/dataMap/ownerView/statistics",
    "method": "POST",
    "requestSchema": {},
    "responseSchema": {
      "dataOwner": "String",
      "appName": "String",
      "cnt": "Long"
    },
    "usedInFiles": [
      "src/dataDistribution/DataDistributionView.jsx:49"
    ]
  },
  {
    "name": "属主视角资产清单",
    "url": "/ddm/dataMap/ownerView/assetList",
    "method": "POST",
    "requestSchema": {
      "dataOwner": "String",
      "assetName": "String?",
      "pageNum": "Number?",
      "pageSize": "Number?"
    },
    "responseSchema": "同安全视角资产清单",
    "usedInFiles": [
      "src/dataDistribution/AssetCategoryModal.jsx"
    ]
  },
  {
    "name": "属主视角资产详情",
    "url": "/ddm/dataMap/ownerView/assetDetail",
    "method": "POST",
    "requestSchema": "同安全视角资产详情",
    "responseSchema": "同安全视角资产详情",
    "usedInFiles": [
      "src/dataDistribution/TableDetailModal.jsx"
    ]
  },
  {
    "name": "数据目录统计",
    "url": "/ddm/dataMap/dataCatalog/statistics",
    "method": "POST",
    "requestSchema": {},
    "responseSchema": {
      "domainId": "Long",
      "domainName": "String",
      "tableCnt": "Long",
      "columnCnt": "Long"
    },
    "usedInFiles": [
      "src/dataDistribution/CatalogView.jsx"
    ]
  },
  {
    "name": "数据目录资产清单",
    "url": "/ddm/dataMap/dataCatalog/assetList",
    "method": "POST",
    "requestSchema": "同业务视角资产清单",
    "responseSchema": "同安全视角资产清单",
    "usedInFiles": [
      "src/dataDistribution/CatalogView.jsx"
    ]
  },
  {
    "name": "数据目录资产详情",
    "url": "/ddm/dataMap/dataCatalog/assetDetail",
    "method": "POST",
    "requestSchema": "同安全视角资产详情",
    "responseSchema": "同安全视角资产详情",
    "usedInFiles": [
      "src/dataDistribution/TableDetailModal.jsx"
    ]
  }
]
```

---

## 8. 总结

本文档基于前端项目源码生成，涵盖了：
- ✅ 项目结构与技术栈
- ✅ 功能模块与页面说明
- ✅ 数据模型（从 mock 推断）
- ✅ 接口文档（15个接口）
- ✅ 联调与鉴权约定
- ✅ mockData → API 改造计划

**关键改造点**：
1. 创建 `dataMap.js` 和 `fieldMapper.js`
2. 统计数据需要聚合（前端或后端）
3. 资产清单需要重组树形结构
4. 搜索建议接口临时复用现有接口

**后端需补充**：
1. 分页参数和响应结构
2. 属主视角的 `tableCount` 字段
3. 资产名称搜索建议接口（可选）
4. 表详情筛选建议接口（可选）

**联调建议**：
1. 先实现统计接口（P0）
2. 再实现搜索接口（P0）
3. 最后实现资产清单和详情（P1）

---

**文档生成时间**：2024-02-24  
**前端项目路径**：`fronted/`  
**后端接口基础路径**：`/ddm/dataMap`  
**联系方式**：待补充
